<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Uncertain values · UncertainData.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">UncertainData.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">UncertainData.jl</a></li><li class="is-active"><a class="tocitem" href>Uncertain values</a><ul class="internal"><li><a class="tocitem" href="#UncertainValue-constructors"><span><code>UncertainValue</code> constructors</span></a></li><li><a class="tocitem" href="#Uncertain-data-types"><span>Uncertain data types</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li><li><a class="tocitem" href="#Combining/merging"><span>Combining/merging</span></a></li></ul></li><li><a class="tocitem" href="../../uncertain_datasets/datasets/">Uncertain datasets</a></li><li><a class="tocitem" href="../../sampling_constraints/sampling_constraints/">Sampling constraints</a></li><li><span class="tocitem">Uncertain statistics</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">Core statistics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../uncertain_statistics/core_stats/core_statistics/">Statistics on uncertain values and collections</a></li><li><a class="tocitem" href="../../uncertain_statistics/core_stats/core_statistics_point_estimates/">Point-estimate statistics</a></li><li><a class="tocitem" href="../../uncertain_statistics/core_stats/core_statistics_pairwise_estimates/">Pairwise estimates of statistics</a></li><li><a class="tocitem" href="../../uncertain_statistics/core_stats/core_statistics_datasets_single_dataset_estimates/">Statistics on single collections of uncertain data</a></li><li><a class="tocitem" href="../../uncertain_statistics/core_stats/core_statistics_datasets_pairwise_estimates/">Pairwise statistics on uncertain data collections</a></li><li><a class="tocitem" href="../../uncertain_statistics/core_stats/core_statistics_datasets/">Statistics on datasets of uncertain values</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Hypothesis tests</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../uncertain_statistics/hypothesistests/hypothesis_tests_overview/">Hypothesis tests for uncertain values and collections</a></li><li><a class="tocitem" href="../../uncertain_statistics/hypothesistests/one_sample_t_test/">One-sample t-test</a></li><li><a class="tocitem" href="../../uncertain_statistics/hypothesistests/equal_variance_t_test/">Equal variance t-test</a></li><li><a class="tocitem" href="../../uncertain_statistics/hypothesistests/unequal_variance_t_test/">Unequal variance t-test</a></li><li><a class="tocitem" href="../../uncertain_statistics/hypothesistests/exact_kolmogorov_smirnov_test/">Exact two-sample Kolmogorov-Smirnov test</a></li><li><a class="tocitem" href="../../uncertain_statistics/hypothesistests/approximate_twosample_kolmogorov_smirnov_test/">Approximate two-sample Kolmogorov-Smirnov test</a></li><li><a class="tocitem" href="../../uncertain_statistics/hypothesistests/jarque_bera_test/">Jarque-Bera test</a></li><li><a class="tocitem" href="../../uncertain_statistics/hypothesistests/mann_whitney_u_test/">Mann-Whitney U-test</a></li><li><a class="tocitem" href="../../uncertain_statistics/hypothesistests/anderson_darling_test/">Anderson-darling test</a></li></ul></li></ul></li><li><span class="tocitem">Binning</span><ul><li><a class="tocitem" href="../../binning/bin/">Binning scalar values</a></li></ul></li><li><span class="tocitem">Resampling</span><ul><li><a class="tocitem" href="../../resampling/resampling_overview/">Overview</a></li><li><a class="tocitem" href="../../resampling/resampling_uncertain_values/">Resampling uncertain values</a></li><li><a class="tocitem" href="../../resampling/resampling_uncertain_datasets/"><code>UncertainDataset</code></a></li><li><a class="tocitem" href="../../resampling/resampling_uncertain_indexvalue_datasets/"><code>UncertainIndexValueDataset</code></a></li><li><a class="tocitem" href="../../resampling/sequential/resampling_uncertaindatasets_sequential/">Is a particular constraint applicable?</a></li><li><a class="tocitem" href="../../resampling/sequential/resampling_indexvalue_sequential/">Resampling syntax</a></li><li><a class="tocitem" href="../../resampling/sequential/strictly_increasing/">Strictly increasing</a></li><li><a class="tocitem" href="../../resampling/sequential/strictly_decreasing/">Strictly decreasing</a></li><li><a class="tocitem" href="../../resampling/interpolation/interpolation/">Supported interpolations</a></li><li><a class="tocitem" href="../../resampling/interpolation/gridded/">Grids</a></li><li><a class="tocitem" href="../../resampling/resampling_schemes/resampling_schemes_uncertain_value_collections/">List of resampling schemes and their purpose</a></li><li><a class="tocitem" href="../../resampling/resampling_schemes/resampling_schemes_uncertain_indexvalue_collections/">List of resampling schemes and their purpose</a></li><li><a class="tocitem" href="../../resampling/resampling_schemes/resampling_with_schemes_uncertain_value_collections/">Resampling with schemes</a></li><li><a class="tocitem" href="../../resampling/resampling_schemes/resampling_with_schemes_uncertain_indexvalue_collections/">Resampling schemes</a></li><li><a class="tocitem" href="../../resampling/resampling_inplace/">In-place resampling</a></li></ul></li><li><span class="tocitem">Propagation of errors</span><ul><li><a class="tocitem" href="../../propagation_of_errors/propagation_of_errors/">Exact error propagation</a></li></ul></li><li><span class="tocitem">Mathematics</span><ul><li><a class="tocitem" href="../../mathematics/elementary_operations/">Elementary mathematical operations</a></li><li><a class="tocitem" href="../../mathematics/trig_functions/">Trigonometric functions</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/tutorial_overview/">Regularising uncertain data</a></li><li><a class="tocitem" href="../../tutorials/tutorial_transforming_data_to_regular_grid/">Transforming uncertain data to a regular grid</a></li></ul></li><li><a class="tocitem" href="../../implementing_algorithms_for_uncertaindata/">Extending existing algorithms for uncertain data types</a></li><li><a class="tocitem" href="../../changelog/">Changelog</a></li><li><a class="tocitem" href="../../publications/">Publications/software</a></li><li><a class="tocitem" href="../../citing/">Citing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Uncertain values</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Uncertain values</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/kahaaga/UncertainData.jl/blob/master/docs/src/uncertain_values/uncertain_values.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Uncertain-values"><a class="docs-heading-anchor" href="#Uncertain-values">Uncertain values</a><a id="Uncertain-values-1"></a><a class="docs-heading-anchor-permalink" href="#Uncertain-values" title="Permalink"></a></h1><h2 id="UncertainValue-constructors"><a class="docs-heading-anchor" href="#UncertainValue-constructors"><code>UncertainValue</code> constructors</a><a id="UncertainValue-constructors-1"></a><a class="docs-heading-anchor-permalink" href="#UncertainValue-constructors" title="Permalink"></a></h2><p>The following convenience constructors are used to defined uncertain values.</p><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainValue" href="#UncertainData.UncertainValues.UncertainValue"><code>UncertainData.UncertainValues.UncertainValue</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">UncertainValue(d::Distribution)
UncertainValue(d::Type{Normal}, μ, σ) → UncertainScalarNormallyDistributed
UncertainValue(d::Type{Uniform}, lower, upper) → UncertainScalarUniformlyDistributed
UncertainValue(d::Type{Beta}, α, β) → UncertainScalarBetaDistributed
UncertainValue(d::Type{BetaPrime}, α, β) → UncertainScalarBetaPrimeDistributed
UncertainValue(d::Type{Gamma}, α, θ) → UncertainScalarGammaDistributed
UncertainValue(d::Type{Frechet}, α, θ) → UncertainScalarFrechetDistributed
UncertainValue(d::Type{Binomial, n, p) → UncertainScalarBinomialDistributed
UncertainValue(d::Type{BetaBinomial, n, α, β) → UncertainScalarBetaBinomialDistributed</code></pre><p>Construct an uncertain value represented by a (possibly truncated)  theoretical distribution <code>d</code>.</p><pre><code class="language-none">UncertainValue(d::Type{&lt;:Distribution}, x::AbstractVector) → UncertainScalarTheoreticalFit</code></pre><p>Construct an uncertain value by fitting a distribution of type <code>d</code> to an empirical sample  <code>x</code>, and use that fitted distribution as the representation of <code>x</code>. </p><p>See also: <a href="#UncertainData.UncertainValues.UncertainScalarTheoreticalFit"><code>UncertainScalarTheoreticalFit</code></a></p><pre><code class="language-none">UncertainValue(x::AbstractVector; 
    kernel::Type{&lt;:Distribution} = Normal, npoints::Int = 2048) → UncertainScalarKDE</code></pre><p>Construct an uncertain value by estimating the underlying distribution to  the empirical sample <code>x</code> using the kernel density estimation (KDE), then using the resulting  KDE-distribution as the representation of <code>x</code>. Fast Fourier transforms are used in the kernel density  estimation, so the number of points should be a power of 2 (default = 2048).</p><p>See also: <a href="#UncertainData.UncertainValues.UncertainScalarKDE"><code>UncertainScalarKDE</code></a></p><pre><code class="language-none">UncertainValue(pop::Vector, probs::Union{Vector, AbstractWeights}) → UncertainScalarPopulation</code></pre><p>Construct an uncertain value from a population <code>pop</code>, whose sampling  probabilities (prior beliefs) are <code>probs</code>. The population <code>pop</code> can contain any  type of uncertain value. Scalars in <code>pop</code> are converted to <a href="#UncertainData.UncertainValues.CertainScalar"><code>CertainScalar</code></a>s.</p><p>See also: <a href="#UncertainData.UncertainValues.UncertainScalarPopulation"><code>UncertainScalarPopulation</code></a></p><pre><code class="language-none">UncertainValue(x::T) where {T &lt;: Real} → CertainScalar</code></pre><p>Create a <code>CertainScalar</code> instance from a scalar with no uncertainty. </p><p>See also: <a href="#UncertainData.UncertainValues.CertainScalar"><code>CertainScalar</code></a></p><pre><code class="language-none">UncertainValue(m::Measurement) → UncertainScalarNormallyDistributed</code></pre><p>Convert a <code>Measurement</code> instance to an uncertain value compatible with UncertainData.jl.</p><p><code>Measurement</code> instances from <a href="https://github.com/JuliaPhysics/Measurements.jl">Measurements.jl</a><sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup> are  treated as normal distributions with known means. Once the conversion is done, the functionality provided by Measurements.jl, such as exact error propagation, is lost.</p><p><strong>Examples</strong></p><p><strong>Theoretical distributions with known parameters</strong></p><p>Measurements are often given as a mean and an associated standard deviation.  Such measurements can be directly represented by the parameters of the distribution.</p><p>Assume a data point has a normally distributed uncertainty, with a mean value of 2.2  and standard deviation of 4.0. We use the following notation to represent that value.</p><pre><code class="language-julia">using UncertainData, Distributions
UncertainValue(Normal(2.2, 4.0))
UncertainValue(Normal, 2.2, 4.0) # alternative constructor</code></pre><p>Other distributions, as well as truncated distributions, also work. </p><pre><code class="language-julia">using UncertainData
UncertainValue(Uniform, -5.0, 5.0)
UncertainValue(Gamma, 3.0, 1.2)

lo, hi = 0.5, 3.5 # truncation limits
UncertainValue(Truncated(Gamma(4, 5.1), lo, hi))</code></pre><p><strong>Theoretical distributions with parameters estimated from empirical data</strong></p><p>In some cases, it might be convenient to represent an empirical sample by a  porobability distribution whose parameters are estimated from the sample.  Here, we simulate a real dataset by generating a small sample from a  normal distribution, then fit a normal distribution to it.</p><pre><code class="language-julia">using UncertainData, Distributions
s = rand(Normal(0, 1), 100)

# Represent the sample `s` by a normal distribution with estimated parameters
x = UncertainValue(Normal, s)</code></pre><p><strong>Distributions estimated using the kernel density approach</strong></p><p>For empirical data with non-trivial underlying distributions, one may use  kernel density estimation to fit a distribution to the empirical sample.</p><p>Below, we simulate a multimodal empirial sample, and represent that  sample by a kernel density estimated distribution.</p><pre><code class="language-julia">using UncertainData, Distributions
M = MixtureModel(Normal[
          Normal(-2.0, 1.2),
          Normal(0.0, 1.0),
          Normal(3.0, 2.5)], [0.2, 0.5, 0.3])
# This is our sample
s = rand(M, 40000)

# `x` is now a kernel density estimated distribution that represents the sample `s`
x = UncertainValue(s) # or UncertainValue(UnivariateKDE, s) to be explicit</code></pre><p><strong>Populations (discrete sets of values with associated weights)</strong></p><p>Sometimes, numerous measurements of the same phenomenon might be available. In such cases,  a population may be used to simultaneously represent all data available. Weights  representing prior beliefs can be added (set weights equal if all points are  equiprobable).</p><p>Below, we assume <code>x1</code> and <code>x2</code> were measured with sophisticated devices, giving  both a mean and standard deviation. <code>x3</code>, on the other hand, was measured with a  primitive device, giving only a mean value. Hence our trust in <code>x3</code> is lower than  for <code>x1</code> and <code>x2</code>. The following </p><pre><code class="language-julia">x1 = UncertainValue(Normal, 0.1, 0.5)
x2 = UncertainValue(Gamma, 1.2, 3.1)
x3 = UncertainValue(0.1)
pop = [x1, x2, x3] # the population
wts = [0.45, 0.45, 0.1] # weights; `x1` and `x2` are equiprobable, and more probable than `x3`.
UncertainValue(pop, wts)</code></pre><p><strong>Values without uncertainties</strong></p><p>Numerical values without associated uncertainties must be converted before mixing with  uncertain values.</p><pre><code class="language-julia">x = UncertainValue(2.0)</code></pre><p><strong>Compatibility with Measurements.jl</strong></p><p><code>Measurement</code>s from Measurements.jl are assumed to be normally distributed and errors  are propagated using linear error propagation theory. In this package, resampling  is used to propagate errors. Thus, <code>Measurement</code>s must be converted to normal distributions  to be used in conjuction with other uncertain values in this package. </p><pre><code class="language-julia">using UncertainData, Measurements
m = measurement(value, uncertainty)
x = UncertainValue(m) # now compatible with UncertainData.jl, but drops support for exact error propagation</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainValue.jl#L7-L166">source</a></section></article><h2 id="Uncertain-data-types"><a class="docs-heading-anchor" href="#Uncertain-data-types">Uncertain data types</a><a id="Uncertain-data-types-1"></a><a class="docs-heading-anchor-permalink" href="#Uncertain-data-types" title="Permalink"></a></h2><h3 id="uncertain_value_theoretical_distribution"><a class="docs-heading-anchor" href="#uncertain_value_theoretical_distribution">Theoretical distributions</a><a id="uncertain_value_theoretical_distribution-1"></a><a class="docs-heading-anchor-permalink" href="#uncertain_value_theoretical_distribution" title="Permalink"></a></h3><p>It is common in the scientific literature to encounter uncertain data values which are reported as following a specific distribution. For example, an author report the mean and standard deviation of a value stated to follow a normal distribution. <code>UncertainData.jl</code> makes it easy to represent such values!</p><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarBetaDistributed" href="#UncertainData.UncertainValues.UncertainScalarBetaDistributed"><code>UncertainData.UncertainValues.UncertainScalarBetaDistributed</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarBetaDistributed(d::Beta, α, β)</code></pre><p>Uncertain value represented by a beta distribution <code>d</code> with parameters <code>α</code> and <code>β</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia">x = UncertainValue(Beta, 0.5, 3.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsTheoretical.jl#L146-L156">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarBetaBinomialDistributed" href="#UncertainData.UncertainValues.UncertainScalarBetaBinomialDistributed"><code>UncertainData.UncertainValues.UncertainScalarBetaBinomialDistributed</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarBetaBinomialDistributed(d::BetaBinomial, n, α, β)</code></pre><p>Uncertain value represented by a beta binomial distribution <code>d</code> with parameters <code>n</code>, <code>α</code> and <code>β</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia">x = UncertainValue(BetaBinomial, 10, 0.2, 0.7)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsTheoretical.jl#L180-L190">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarBetaPrimeDistributed" href="#UncertainData.UncertainValues.UncertainScalarBetaPrimeDistributed"><code>UncertainData.UncertainValues.UncertainScalarBetaPrimeDistributed</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarBetaPrimeDistributed(d::BetaPrime, α, β)</code></pre><p>Uncertain value represented by a beta prime distribution <code>d</code> with parameters <code>α</code> and <code>β</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia">x = UncertainValue(BetaPrime, 2.1, 3.3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsTheoretical.jl#L163-L173">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarBinomialDistributed" href="#UncertainData.UncertainValues.UncertainScalarBinomialDistributed"><code>UncertainData.UncertainValues.UncertainScalarBinomialDistributed</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarBinomialDistributed(d::Binomial, n, θ)</code></pre><p>Uncertain value represented by a binomial distribution <code>d</code> with parameters <code>n</code> and <code>θ</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia">x = UncertainValue(Binomial, 15, 0.5)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsTheoretical.jl#L232-L242">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarFrechetDistributed" href="#UncertainData.UncertainValues.UncertainScalarFrechetDistributed"><code>UncertainData.UncertainValues.UncertainScalarFrechetDistributed</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarFrechetDistributed(d::Frechet, α, θ)</code></pre><p>Uncertain value represented by a Fréchet distribution <code>d</code> with parameters <code>α</code> and <code>θ</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia">x = UncertainValue(Frechet, 2.0, 2.1)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsTheoretical.jl#L215-L225">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarGammaDistributed" href="#UncertainData.UncertainValues.UncertainScalarGammaDistributed"><code>UncertainData.UncertainValues.UncertainScalarGammaDistributed</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarGammaDistributed(d::Gamma, α, θ)</code></pre><p>Uncertain value represented by a gamma distribution <code>d</code> with parameters <code>α</code> and <code>θ</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia">x = UncertainValue(Gamma, 0.2, 0.44)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsTheoretical.jl#L198-L208">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarNormallyDistributed" href="#UncertainData.UncertainValues.UncertainScalarNormallyDistributed"><code>UncertainData.UncertainValues.UncertainScalarNormallyDistributed</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarNormallyDistributed(d::Normal, μ, σ)</code></pre><p>Uncertain value represented by a normal distribution <code>d</code> with mean <code>μ</code> and standard deviation <code>σ</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia">x = UncertainValue(Normal, 1.2, 0.3)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsTheoretical.jl#L112-L122">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarUniformlyDistributed" href="#UncertainData.UncertainValues.UncertainScalarUniformlyDistributed"><code>UncertainData.UncertainValues.UncertainScalarUniformlyDistributed</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarUniformlyDistributed(d::Uniform, lower, upper)</code></pre><p>Uncertain value represented by a uniform distribution <code>d</code> with <code>lower</code> and <code>upper</code> bounds.</p><p><strong>Example</strong></p><pre><code class="language-julia">x = UncertainValue(Uniform, -2.5, 4.5)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsTheoretical.jl#L129-L139">source</a></section></article><h3 id="uncertain_value_fitted_theoretical_distribution"><a class="docs-heading-anchor" href="#uncertain_value_fitted_theoretical_distribution">Fitted theoretical distributions</a><a id="uncertain_value_fitted_theoretical_distribution-1"></a><a class="docs-heading-anchor-permalink" href="#uncertain_value_fitted_theoretical_distribution" title="Permalink"></a></h3><p>For data values with histograms close to some known distribution, the user may choose to represent the data by fitting a theoretical distribution to the values. This will only work well if the histogram closely resembles a theoretical distribution.</p><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarTheoreticalFit" href="#UncertainData.UncertainValues.UncertainScalarTheoreticalFit"><code>UncertainData.UncertainValues.UncertainScalarTheoreticalFit</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarTheoreticalFit(  
    d::FittedDistribution{D}, 
    x::AbstractVector{T}) where {D &lt;: Distribution, T}</code></pre><p>An uncertain value represented a distribution <code>d</code> whose parameters are  estimated from the empirical sample <code>x</code>.</p><p><strong>Examples</strong></p><p>Here, we simulate an empirical sample. We then decide to represent the  sample by a distribution whose parameters are estimated from the sample.</p><pre><code class="language-julia">using UncertainData, Distributions
# Simulate a 1000-point sample by drawing from a uniform distribution.
d = Uniform(); s = rand(d, 1000)

# Represent `s` by a uniform distribution whose parameters are estimated from `s`
x = UncertainValue(Uniform, s)</code></pre><pre><code class="language-julia">using UncertainData, Distributions
# Simulate a 1000-point sample by drawing from a normal distribution.
s = rand(Normal(), 1000)

# Represent `s` by a normal distribution whose parameters are estimated from `s`
x = UncertainValue(Normal, s)</code></pre><pre><code class="language-julia">using UncertainData, Distributions

# Simulate a 1000-point sample by drawing from a gamma distribution 
# with parameters α = 2.1, θ = 5.2.
s = rand(Gamma(2.1, 5.2), 1000)

# Represent `s` by a gamma distribution whose parameters are estimated from `s`
x = UncertainValue(Gamma, some_sample)</code></pre><p><em>Note: these examples are contrived: of course, estimating the parameters  of a uniform distribution from a sample drawn from a uniform distribution will yield a good fit. Real samples are usually less straight-forward to  model using theoretical distributions</em>. In real applications, make sure to always visually investigate the histogram of your data before picking which distribution to fit! Alternatively,  use kernel density estimation to fit a distribution (i.e. <a href="#UncertainData.UncertainValues.UncertainScalarKDE"><code>UncertainScalarKDE</code></a>).</p><p><strong>Beware: fitting distributions may lead to nonsensical results!</strong></p><p>In a less contrived example, we may try to fit a beta distribution to a sample generated from a gamma distribution.</p><pre><code class="language-julia">using Distributions, UncertainData

# Generate 1000 values from a gamma distribution with parameters α = 2.1,
# θ = 5.2.
s = rand(Gamma(2.1, 5.2), 1000)

# Represent `s` by a beta distribution whose parameters are estimated from `s`
x = UncertainValue(Beta, some_sample)</code></pre><p>This is obviously not a good idea. Always visualise your distribution before deciding on which distribution to fit! You won&#39;t get any error messages if you try to fit a distribution that does not match your data.</p><p>If the data do not follow an obvious theoretical distribution, it is better to use kernel density estimation to define the uncertain value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsTheoreticalFitted.jl#L8-L82">source</a></section></article><h3 id="uncertain_value_kde"><a class="docs-heading-anchor" href="#uncertain_value_kde">Kernel density estimates (KDE)</a><a id="uncertain_value_kde-1"></a><a class="docs-heading-anchor-permalink" href="#uncertain_value_kde" title="Permalink"></a></h3><p>When your data have an empirical distribution that doesn&#39;t follow any obvious theoretical distribution, the data may be represented by a kernel density estimate to the underlying distribution.</p><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarKDE" href="#UncertainData.UncertainValues.UncertainScalarKDE"><code>UncertainData.UncertainValues.UncertainScalarKDE</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarKDE(d::KernelDensity.UnivariateKDE, x::AbstractVector, range, pdf)</code></pre><p>An uncertain value represented by a kernel density estimate <code>d</code>,  to the  underlying distribution for the empirical sample <code>x</code>. </p><p><code>range</code> are the values for which the pdf is estimated, and <code>pdf</code> are the  corresponding values of the pdf. Gaussian kernels are used by default.</p><p><strong>Examples</strong></p><pre><code class="language-julia">using Distributions, UncertainData, KernelDensity

# Draw a 1000-point sample from a normal distribution.
s = rand(Normal(), 1000)

# Estimate a distribution to the underlying distribution by using 
# kernel density estimation on the sample `s` 
x = UncertainValue(s)

# The explicit constructor allows adjusting the kernel (must be a valid 
# kernel from Distributions.jl; normal distributions are the default), 
# and the number of  points used for the estimation (must be a power of 2; 
# default is 2048 points).
x = UncertainValue(UnivariateKDE, s; kernel = Normal, npoints = 1024) </code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarsKDE.jl#L12-L39">source</a></section></article><h4 id="Extended-example"><a class="docs-heading-anchor" href="#Extended-example">Extended example</a><a id="Extended-example-1"></a><a class="docs-heading-anchor-permalink" href="#Extended-example" title="Permalink"></a></h4><p>Let&#39;s create a bimodal distribution, then sample 10000 values from it.</p><pre><code class="language-julia">using UncertainData, Distributions, Plots, StatsPlots
# Draw 1000 points from a three-component mixture model to create a multimodal distribution.
n1 = Normal(-3.0, 1.2)
n2 = Normal(8.0, 1.2)
n3 = Normal(0.0, 2.5)
M = MixtureModel([n1, n2, n3])
s = rand(M, 1000);
histogram(s, nbins = 80)
ylabel!(&quot;Frequency&quot;); xlabel!(&quot;Value&quot;)</code></pre><p><img src="../figs/bimodal_empirical.svg" alt/></p><p>It is not obvious which distribution to fit to such data. A kernel density estimate, however, will always be a decent representation of the data, because it doesn&#39;t follow a specific distribution and adapts to the data values.</p><p>To create a kernel density estimate, simply call the <code>UncertainValue</code> constructor with a vector containing the sample. This will trigger kernel density estimation.</p><pre><code class="language-julia">x = UncertainValue(s)</code></pre><pre class="documenter-example-output">UncertainScalarKDE{Float64, Vector{Float64}}(UnivariateKDE{StepRangeLen{Float64, Base.TwicePrecision{Float64}, Base.TwicePrecision{Float64}}}, range = -11.269197769054092:0.013125627772402622:15.598962281054074)</pre><p>The plot below compares the empirical histogram (here represented as a density plot) with our kernel density estimate.</p><pre><code class="language-julia">x = UncertainValue(s)
density(s, label = &quot;10000 mixture model (M) samples&quot;)
density!(rand(x, 50000),
    label = &quot;50000 samples from KDE estimate to M&quot;)
xlabel!(&quot;data value&quot;)
ylabel!(&quot;probability density&quot;)</code></pre><pre class="documenter-example-output">┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189</pre><p><img src="../figs/KDEUncertainValue.svg" alt/></p><h3 id="uncertain_value_population"><a class="docs-heading-anchor" href="#uncertain_value_population">Populations</a><a id="uncertain_value_population-1"></a><a class="docs-heading-anchor-permalink" href="#uncertain_value_population" title="Permalink"></a></h3><p>The <code>UncertainScalarPopulation</code> type allows representation of an uncertain scalar  represented by a population of values who will be sampled according to a set of  explicitly provided probabilities. See <a href="#uncertainvalue_combine">examples</a>.</p><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.UncertainScalarPopulation" href="#UncertainData.UncertainValues.UncertainScalarPopulation"><code>UncertainData.UncertainValues.UncertainScalarPopulation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">UncertainScalarPopulation(members, probs)
UncertainScalarPopulation(members, probs::Vector{Number})
UncertainScalarPopulation(members, probs::Statsbase.AbstractWeights)</code></pre><p>An <code>UncertainScalarPopulation</code>, which consists of some population <code>members</code>  with associated weights (<code>probs</code>) that indicate the relative importance of the  population members (for example during resampling). The <code>members</code> can be either  numerical values, any type of uncertain value defined in this package  (including populations, so nested populations are possible).</p><p><strong>Examples</strong></p><p>Weighted scalar populations are defined as follows. Weights must always be provided, and scalars must be converted to uncertain values before creating the population.</p><pre><code class="language-julia">using UncertainData
members = UncertainValue.([1.0, 2.0, 3.0]); wts = rand(3)

# Treat elements of `members` as equiprobable  
p = UncertainScalarPopulation(members, [1, 1, 1]) 

# Treat elements of `members` as inequiprobable  
p = UncertainScalarPopulation(members, [2, 3, 1]) </code></pre><p>Uncertain populations can also consist of a mixture of different types of uncertain values. Here, we use a population consisting of a scalar, two theoretical distributions with known parameters, and a theoretical uniform distribution whose parameters  are estimated from a random sample <code>s</code>. We assign equal weights to the member  of the population.</p><pre><code class="language-julia">s = rand(1000)
members = [3.0, UncertainValue(Normal, 0, 1), UncertainValue(Gamma, 2, 3), 
    UncertainValue(Uniform, s)]
wts = [0.5, 0.5, 0.5, 0.5]
p = UncertainValue(members, wts)</code></pre><p>Nested populations are also possible, and sub-populations can be given  unequal sampling priority.</p><pre><code class="language-julia">using UncertainData, Distributions 
s = rand(Normal(0.1, 2.0), 8000)
v1, v2 = UncertainValue(Normal, 0.5, 0.33), UncertainValue(Gamma, 0.6, 0.9)
v3, v4 = 2.2, UncertainValue(Normal, s), UncertainValue(s)

# When sampling sub-population m1, members v1 and v2 are given relative importance 1 to 3
# When sampling sub-population m2, members v3 and v4 are given relative importance 2 to 1
m1 = UncertainValue([v1, v2], [1, 3]) 
m2 = UncertainValue([v3, v4], [2, 1])

# When sampling the overall population, the sub-populations m1 and m2 
# are sampled with equal importance.
p = UncertainValue([m1, m2], [1, 1])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/UncertainScalarPopulation.jl#L18-L77">source</a></section></article><h3 id="Certain-values"><a class="docs-heading-anchor" href="#Certain-values">Certain values</a><a id="Certain-values-1"></a><a class="docs-heading-anchor-permalink" href="#Certain-values" title="Permalink"></a></h3><p>The <code>CertainScalar</code> allows representation of values with no uncertainty. It behaves  just as a scalar, but can be mixed with uncertain values when performing  <a href="../../mathematics/elementary_operations/">mathematical operations</a> and  <a href="../../resampling/resampling_overview/">resampling</a>. </p><article class="docstring"><header><a class="docstring-binding" id="UncertainData.UncertainValues.CertainScalar" href="#UncertainData.UncertainValues.CertainScalar"><code>UncertainData.UncertainValues.CertainScalar</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">CertainScalar</code></pre><p>A simple wrapper type for values with no uncertainty (i.e. represented by a scalar).</p><p><strong>Examples</strong></p><p>The two following ways of constructing values without uncertainty are equivalent. </p><pre><code class="language-julia">u1, u2 = CertainScalar(2.2), CertainScalar(6)
w1, w2 = UncertainValue(2.2), UncertainValue(6)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/CertainScalar.jl#L1-L15">source</a></section></article><h3 id="Compatibility-with-Measurements.jl"><a class="docs-heading-anchor" href="#Compatibility-with-Measurements.jl">Compatibility with Measurements.jl</a><a id="Compatibility-with-Measurements.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Compatibility-with-Measurements.jl" title="Permalink"></a></h3><p><code>Measurement</code> instances from the Measurements.jl package<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup> are in UncertainData.jl represented as normal distributions. If exact error propagation is a requirement and your data is exclusively normally distributed, use Measurements.jl. If your data is not necessarily  normally distributed and contain errors of different types, and  a resampling approach to error propagation is desired, use UncertainData.jl. </p><p>See the <a href="#UncertainData.UncertainValues.UncertainValue"><code>UncertainValue</code></a> constructor for instructions on how to  convert <code>Measurement</code>s to uncertain values compatible with this package.</p><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><p>First, load the necessary packages:</p><pre><code class="language-julia">using UncertainData, Distributions, KernelDensity, Plots</code></pre><h3 id="Theoretical-distributions"><a class="docs-heading-anchor" href="#Theoretical-distributions">Theoretical distributions</a><a id="Theoretical-distributions-1"></a><a class="docs-heading-anchor-permalink" href="#Theoretical-distributions" title="Permalink"></a></h3><h4 id="A-uniformly-distributed-uncertain-value"><a class="docs-heading-anchor" href="#A-uniformly-distributed-uncertain-value">A uniformly distributed uncertain value</a><a id="A-uniformly-distributed-uncertain-value-1"></a><a class="docs-heading-anchor-permalink" href="#A-uniformly-distributed-uncertain-value" title="Permalink"></a></h4><p>Consider the following contrived example. We&#39;ve measure a data value with a poor instrument  that tells us that the value lies between <code>-2</code> and <code>3</code>. However, we but that we know nothing  more about how the value is distributed on that interval. Then it may be reasonable to  represent that value as a uniform distribution on <code>[-2, 3]</code>.</p><p>To construct an uncertain value following a uniform distribution, we use the constructor  for theoretical distributions with known parameters  (<code>UncertainValue(distribution, params...)</code>). </p><p>The uniform distribution is defined by its lower and upper bounds, so we&#39;ll provide  these bounds as the parameters.</p><pre><code class="language-julia">u = UncertainValue(Uniform, 1, 2)

# Plot the estimated density
bar(u, label = &quot;&quot;, xlabel = &quot;value&quot;, ylabel = &quot;probability density&quot;)</code></pre><p><img src="../figs/uncertainvalue_theoretical_uniform.svg" alt/></p><h4 id="A-normally-distributed-uncertain-value"><a class="docs-heading-anchor" href="#A-normally-distributed-uncertain-value">A normally distributed uncertain value</a><a id="A-normally-distributed-uncertain-value-1"></a><a class="docs-heading-anchor-permalink" href="#A-normally-distributed-uncertain-value" title="Permalink"></a></h4><p>A situation commonly encountered is to want to use someone else&#39;s data from a publication.  Usually, these values are reported as the mean or median, with some associated uncertainty.  Say we want to use an uncertain value which is normally distributed with mean <code>2.1</code> and  standard deviation <code>0.3</code>.</p><p>Normal distributions also have two parameters, so we&#39;ll use the two-parameter constructor  as we did above. </p><pre><code class="language-julia">u = UncertainValue(Normal, 2.1, 0.3)

# Plot the estimated density
bar(u, label = &quot;&quot;, xlabel = &quot;value&quot;, ylabel = &quot;probability density&quot;)</code></pre><p><img src="../figs/uncertainvalue_theoretical_normal.svg" alt/></p><h3 id="Kernel-density-estimated-distributions"><a class="docs-heading-anchor" href="#Kernel-density-estimated-distributions">Kernel density estimated distributions</a><a id="Kernel-density-estimated-distributions-1"></a><a class="docs-heading-anchor-permalink" href="#Kernel-density-estimated-distributions" title="Permalink"></a></h3><p>One may also be given a a distribution of numbers that&#39;s not quite normally distributed.  How to represent this uncertainty? Easy: we use a kernel density estimate to the distribution.</p><p>Let&#39;s define a complicated distribution which is a mixture of two different normal  distributions, then draw a sample of numbers from it.</p><pre><code class="language-julia">M = MixtureModel([Normal(-5, 0.5), Normal(0.2)])
some_sample = rand(M, 250)</code></pre><p>Now, pretend that <code>some_sample</code> is a list of measurements we got from somewhere.  KDE estimates to the distribution can be defined implicitly or explicitly as follows:</p><pre><code class="language-julia"># If the only argument to `UncertainValue()` is a vector of number, KDE will be triggered.
u = UncertainValue(rand(M, 250)) 

# You may also tell the constructor explicitly that you want KDE. 
u = UncertainValue(UnivariateKDE, rand(M, 250))</code></pre><p>Now, let&#39;s plot the resulting distribution. <em>Note: this is not the original mixture of  Gaussians we started out with, it&#39;s the kernel density estimate to that mixture!</em></p><pre><code class="language-julia"># Plot the estimated distribution.
plot(u, xlabel = &quot;Value&quot;, ylabel = &quot;Probability density&quot;)</code></pre><p><img src="../figs/uncertainvalue_kde_bimodal.svg" alt/></p><h3 id="Theoretical-distributions-fitted-to-empirical-data"><a class="docs-heading-anchor" href="#Theoretical-distributions-fitted-to-empirical-data">Theoretical distributions fitted to empirical data</a><a id="Theoretical-distributions-fitted-to-empirical-data-1"></a><a class="docs-heading-anchor-permalink" href="#Theoretical-distributions-fitted-to-empirical-data" title="Permalink"></a></h3><p>One may also be given a dataset whose histogram looks a lot like a theoretical distribution. We may then select a theoretical distribution and fit its parameters to the empirical data.</p><p>Say our data was a sample that looks like it obeys Gamma distribution.</p><pre><code class="language-julia"># Draw a 2000-point sample from a Gamma distribution with parameters α = 1.7 and θ = 5.5
some_sample = rand(Gamma(1.7, 5.5), 2000)</code></pre><p>To perform a parameter estimation, simply provide the distribution as the first  argument and the sample as the second argument to the <code>UncertainValue</code> constructor.</p><pre><code class="language-julia"># Take a sample from a Gamma distribution with parameters α = 1.7 and θ = 5.5 and 
# create a histogram of the sample.
some_sample = rand(Gamma(1.7, 5.5), 2000)

p1 = histogram(some_sample, normalize = true,
    fc = :black, lc = :black,
    label = &quot;&quot;, xlabel = &quot;value&quot;, ylabel = &quot;density&quot;)

# For the uncertain value representation, fit a gamma distribution to the sample. 
# Then, compare the histogram obtained from the original distribution to that obtained 
# when resampling the fitted distribution
uv = UncertainValue(Gamma, some_sample)

# Resample the fitted theoretical distribution
p2 = histogram(resample(uv, 10000), normalize = true,
    fc = :blue, lc = :blue,
    label = &quot;&quot;, xlabel = &quot;value&quot;, ylabel = &quot;density&quot;)

plot(p1, p2, layout = (2, 1), link = :x)</code></pre><p>As expected, the histograms closely match (but are not exact because we estimated the distribution using a limited sample).</p><p><img src="../figs/uncertainvalue_theoretical_fitted_gamma.svg" alt/></p><h3 id="Populations"><a class="docs-heading-anchor" href="#Populations">Populations</a><a id="Populations-1"></a><a class="docs-heading-anchor-permalink" href="#Populations" title="Permalink"></a></h3><p>See <a href="#uncertainvalue_combine">examples for combining multiple values</a>.</p><h2 id="Combining/merging"><a class="docs-heading-anchor" href="#Combining/merging">Combining/merging</a><a id="Combining/merging-1"></a><a class="docs-heading-anchor-permalink" href="#Combining/merging" title="Permalink"></a></h2><p>Because all uncertainties are handled using a resampling approach, it is trivial to  <a href="#UncertainData.combine-Tuple{Vector{AbstractUncertainValue}}"><code>combine</code></a> or merge uncertain values of different types into a single uncertain value.</p><p>Depending on your data, you may want to choose of one the following ways of  representing multiple uncertain values as one.</p><h3 id="uncertainvalue_combine"><a class="docs-heading-anchor" href="#uncertainvalue_combine">Exact approach: populations</a><a id="uncertainvalue_combine-1"></a><a class="docs-heading-anchor-permalink" href="#uncertainvalue_combine" title="Permalink"></a></h3><p>Combining uncertain values is done by representing them as a weighted population of uncertain values. This approach exactly preserves the uncertainties of  the multiple uncertain values during resampling. Adding weights makes it possible to impose expert-opinion on the relative sampling probabilities of uncertain  values but still sample from the entire supports of the furnishing distributions.</p><p>With equal weights, combining uncertain values introduces no bias beyond what is present in the data,  because resampling is done from the full supports of each of the furnishing values.  Additional information on relative sampling probabilities, however, be it informed by expert opinion or quantative estimates, is easily incorporated by adjusting  the sampling weights.</p><pre><code class="language-julia">using UncertainData, Plots, StatsPlots

# Assume we have done some analysis and have three points whose uncertainties
# significantly overlap. We want to combine these into one uncertain value.
v1 = UncertainValue(Normal(-0.1, 0.52))
v2 = UncertainValue(Normal(0.27, 0.42))
v3 = UncertainValue(Normal(0.5, 0.61))

# Let the values v1, v2 and v3 be sampled with equal importance
pop = UncertainValue([v1, v2, v3], [1, 1, 1])

# Let the values v1, v2 and v3 be sampled with relative importance 1-2-3
pop = UncertainValue([v1, v2, v3], [1, 2, 3])

d1 = plot()
density!(d1, resample(pop, 20000), label = &quot;Overall population&quot;)
d2 = plot()
density!(d2, resample(v1, 20000), label = &quot;v1&quot;)
density!(d2, resample(v2, 20000), label = &quot;v2&quot;)
density!(d2, resample(v3, 20000), label = &quot;v3&quot;)
plot(d1, d2, layout = (2, 1), xlabel = &quot;Value&quot;, ylabel = &quot;Density&quot;,
    link = :x, xlims = (-2.5, 2.5),
    legend = :topleft, fg_legend = :transparent, bg_legend = :transparent)</code></pre><pre class="documenter-example-output">┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189</pre><p><img src="../figs/population_ex1.png" alt/></p><p>This is not restricted to normal distributions! We can combine any type of  value in our population, even populations!</p><pre><code class="language-julia">using UncertainData, Plots, StatsPlots
v1 = UncertainValue(Normal, 0.265, 0.52)
v2 = UncertainValue(Normal, 0.311, 0.15)
v3 = UncertainValue(Beta, 0.7, 0.8)
v4 = UncertainValue(Gamma, 0.5, 1.0)

# Define two sub-populations. Members of each sub-population are sampled
# with equal importance.
p1, p2 = UncertainValue([v1, v4], [1, 1]), UncertainValue([v2, v3], [1, 1])

# In the overall population, sub-populations are sampled with relative importance 2 to 1.
pop = UncertainValue([p1, p2], [2, 1])

d1 = plot()
density!(d1, resample(pop, 20000), label = &quot;Overall population&quot;)
d2 = plot()
density!(d2, resample(pop[1], 20000), label = &quot;Subpopulation p1 (v1 and v4)&quot;)
density!(d2, resample(pop[2], 20000), label = &quot;Subpopulation p2 (v2 and v3)&quot;)

d3 = plot()
density!(d3, resample(v1, 20000), label = &quot;v1&quot;)
density!(d3, resample(v2, 20000), label = &quot;v2&quot;)
density!(d3, resample(v3, 20000), label = &quot;v3&quot;)
density!(d3, resample(v4, 20000), label = &quot;v4&quot;)

plot(d1, d2, d3, layout = (3, 1), xlabel = &quot;Value&quot;, ylabel = &quot;Density&quot;,
    link = :x, xlims = (-2.5, 2.5),
    legend = :topleft, fg_legend = :transparent, bg_legend = :transparent)</code></pre><pre class="documenter-example-output">┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189
┌ Warning: seriestype density has been moved to StatsPlots.  To use: `Pkg.add(&quot;StatsPlots&quot;); using StatsPlots`
└ @ Plots ~/.julia/packages/Plots/lzHOt/src/args.jl:1189</pre><p><img src="../figs/population_ex2.png" alt/></p><h3 id="uncertainvalue_merge"><a class="docs-heading-anchor" href="#uncertainvalue_merge">Approximate approach: KDE</a><a id="uncertainvalue_merge-1"></a><a class="docs-heading-anchor-permalink" href="#uncertainvalue_merge" title="Permalink"></a></h3><p>Merging multiple uncertain values could be done by fitting a model distribution to  the values. Using any specific theoretical distribution as a model for the combined  uncertainty, however, is in general not possible, because the values may have  different types of uncertainties.</p><p>The <code>combine</code> function instead uses kernel density estimation is used to merge  multiple uncertain values. This has the advantage that you only  have to deal with a single estimate to the combined distribution, but  introduces bias because the distribution is <em>estimated</em>. Additionally, the shape of the distribution depends on the parameters of the KDE procedure.</p><article class="docstring"><header><a class="docstring-binding" id="UncertainData.combine-Tuple{Vector{AbstractUncertainValue}}" href="#UncertainData.combine-Tuple{Vector{AbstractUncertainValue}}"><code>UncertainData.combine</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">combine(x::Vector{AbstractUncertainValue}; 
    n = 10000*length(uvals), bw::Union{Nothing, Real} = nothing) → UncertainScalarKDE
combine(x::Vector{AbstractUncertainValue}, weights::ProbabilityWeights; kwargs...) → UncertainScalarKDE
combine(x::Vector{AbstractUncertainValue}, weights::AnalyticWeights; kwargs...) → UncertainScalarKDE
combine(x::Vector{AbstractUncertainValue}, weights::FrequencyWeights; kwargs...) → UncertainScalarKDE</code></pre><p>Combine multiple uncertain values <code>x</code> into a single uncertain value using kernel  density estimation (KDE). This is done by resampling each uncertain value in <code>x</code>,  <code>n</code> times  each, then pooling these draws together. Finally, an approximation  to the final distribution is computed over those draws using KDE.</p><p>The KDE bandwidth is controlled by <code>bw</code>. By default, <code>bw = nothing</code>; in this case,  the bandwidth is determined using the <code>KernelDensity.default_bandwidth</code> function. Tip: For very wide, close-to-normal distributions, the default bandwidth usually  works well.For very peaked distributions or discrete populations, however,  a lowering the bandwidth significantly may be a better choice.</p><p>If no weights are provided, the sample pool on which KDE is performed is computed  by resampling each of the <code>N</code> uncertain values <code>n/N</code> times and pooling these values  together. If <code>weights</code> are provided, then the <code>weights</code> control the relative sampling  importance of the elements of <code>x</code>. <code>Weights</code>, <code>ProbabilityWeights</code> and  <code>AnalyticWeights</code> are  functionally the same, and represent relative sampling probabilities. Either  may be used depending on whether the weights are assigned subjectively or quantitatively.  With <code>FrequencyWeights</code>, it is possible to control the exact number of draws from each  uncertain value that goes into the draw pool before performing kernel density estimation.</p><p><strong>Example</strong></p><pre><code class="language-julia">v1 = UncertainValue(Normal, 1, 0.3)
v2 = UncertainValue(Normal, 0.8, 0.4)
v3 = UncertainValue([rand() for i = 1:3], [0.3, 0.3, 0.4])
v4 = UncertainValue(Normal, 3.7, 0.8)
uvals = [v1, v2, v3, v4];

combine(uvals)
combine(uvals, n = 20000) # adjust number of total draws</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/kahaaga/UncertainData.jl/blob/c8c0f2458ca151d459aac013546a2a738af572f3/src/uncertain_values/operations/merging.jl#L1-L40">source</a></section></article><h4 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h4><pre><code class="language-julia">using UncertainData, Plots, StatsPlots
v1 = UncertainValue(UnivariateKDE, rand(4:0.25:6, 1000), bandwidth = 0.02)
v2 = UncertainValue(Normal, 0.8, 0.4)
v3 = UncertainValue([rand() for i = 1:3], [0.3, 0.3, 0.4])
v4 = UncertainValue(Gamma, 8, 0.4)
uvals = [v1, v2, v3, v4];

p = plot()
plot!(v1, label = &quot;v1&quot;, ls = :dashdot)
plot!(v2, label = &quot;v2&quot;, ls = :dot)
vline!(v3, label = &quot;v3&quot;, ls = :dash) # plot each possible state as vline
plot!(v4, label = &quot;v4&quot;)

pcombined = plot(lc = :black,
    combine(uvals, n = 100000),
    title = &quot;combine([v1, v2, v3, v4])&quot;)
pcombined_pw = plot(lc = :black,
    combine(uvals, ProbabilityWeights([0.1, 0.3, 0.02, 0.5]), n = 100000, bw = 0.05),
    title = &quot;combine([v1, v2, v3, v4], ProbabilityWeights([0.1, 0.3, 0.02, 0.5])&quot;)
pcombined_fw = plot(lc = :black,
    combine(uvals, FrequencyWeights([10000, 20000, 3000, 5000]), bw = 0.05),
    title = &quot;combine([v1, v2, v3, v4], FrequencyWeights([10000, 20000, 3000, 5000])&quot;)

plot(p, pcombined, pcombined_pw, pcombined_fw,
    layout = (4, 1), link = :x, ylabel = &quot;Density&quot;, lw = 1,
        titlefont = font(8), guidefont = font(9), size = (700, 600))</code></pre><p><img src="../figs/combine_ex.png" alt/></p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>M. Giordano, 2016, &quot;Uncertainty propagation with functionally correlated quantities&quot;, arXiv:1610.08716 (Bibcode: 2016arXiv161008716G).</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« UncertainData.jl</a><a class="docs-footer-nextpage" href="../../uncertain_datasets/datasets/">Uncertain datasets »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 30 April 2021 14:38">Friday 30 April 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
